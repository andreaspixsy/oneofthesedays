<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">	
	<head>
            <title>One of These Days</title>
            <style>@import url('/main.css'); </style>
	</head>
	<body>
             <header>
                 <h1><a href='/'>One of These Days</a></h1>
            </header>
            <section>
                   <div id='background'></div>
    <div id='container'>
        <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
        <th class=docs>
            <h2>Subversion For Code Management</h2>
            <h5>18 Jun 2010</h5>
        </th>
      <th class=code></th>
    </tr>
</thead>
<tbody>
    <tr id='section-1'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-1">&#182;</a>
    </div>
    <p>Gone are the days of a handful of simple html pages to make up a website. Projects can consist of many, many files and, especially with multiple people involved, this can become difficult to manage. From graphics to documentation to source code, a version control system (VCS) is an easy way to manage your project and ensure that nothing important is ever lost. This tutorial will take you through the basics of version control, setting up Subversion server on your PC, and lastly we&rsquo;ll look at how you keep track of your files.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-What_is_a_Version_Control_System_(VCS)?'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-What_is_a_Version_Control_System_(VCS)?">&#182;</a>
    </div>
    <h2>What is a Version Control System (VCS)?</h2>

<p>If you&rsquo;ve ever asked yourself the question &ldquo;how can I get back this change that I&rsquo;ve overwritten&rdquo;, &ldquo;this program used to work better before we added that feature&rdquo; or, &ldquo;can you send me the latest copy of your code before I make changes&rdquo;, then a VCS is your answer to them.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-3'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-3">&#182;</a>
    </div>
    <p>A VCS consists of a central repository which stores all of your project files. It keeps track of the files that are added and will store of all the changes that are made to them. This means that when you update a file, any previously saved work can be recovered by undoing particular updates. Multiple people can save to this same repository and so the VCS also takes care (with some user help, as we shall see) of managing files to ensure that no one can overwrite anyone elses work. Essentially, a VCS is turbo-charged undo/redo history for your computer.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-4'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-4">&#182;</a>
    </div>
    <p>Before we get into setting up a VCS for ourselves, let&rsquo;s take a look at a common problem with VCS and how it&rsquo;s solved. Called the &ldquo;Lost Update&rdquo; problem, it occurs when 2 people are editing the same file at the same time and both want to save their changes. The image below is from the Subversion Book, which is the user guide for a common VCS.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-5'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-5">&#182;</a>
    </div>
    <p>Obviously we don&rsquo;t want something like this happening and fortunately, VCS provide us with 2 methods of ensuring that it doesn&rsquo;t. The first method is called &ldquo;Locking&rdquo; (also known as &ldquo;Reserved Checkouts&rdquo;) and involves &lsquo;locking&rsquo; a file before editing it. &lsquo;Locking&rsquo; the file means that no one else is able to edit the file until it is released again. This ensures that changes cannot be overwritten as there is only ever one person editing the file at a time. While this can cause problems, it offers complete assurance that work will not be overwritten.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-6'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-6">&#182;</a>
    </div>
    <p>The second method is called &ldquo;Merging&rdquo; (also known as &ldquo;Unreserved Checkouts&rdquo;) and involves merging copies of work when the same file has been edited. If the parts of the file that were edited are in different locations then the two files can automatically be merged by the system. If &lsquo;overlap&rsquo; between edited parts occurs however then it is up to the user to manually combine the files. The code examples below illustrates two files that are to be merged both with, and without overlap.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Edit_without_overlap'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_without_overlap">&#182;</a>
    </div>
    <h3>Edit without overlap</h3>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Edit_1:'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_1:">&#182;</a>
    </div>
    <h4>Edit 1:</h4>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit1</span> <span class="o">=</span> <span class="s2">&quot;The cat sat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-9'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-9">&#182;</a>
    </div>
    <p>rest of the code</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Edit_2:'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_2:">&#182;</a>
    </div>
    <h4>Edit 2:</h4>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-11'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-11">&#182;</a>
    </div>
    <p>rest of the code</p>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit2</span> <span class="o">=</span> <span class="s2">&quot;on the mat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-12'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-12">&#182;</a>
    </div>
    <p>As both edits are in different areas of the code, they can be merged with no conflicts.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit1</span> <span class="o">=</span> <span class="s2">&quot;The cat sat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-13'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-13">&#182;</a>
    </div>
    <p>rest of the code</p>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit2</span> <span class="o">=</span> <span class="s2">&quot;on the mat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-Edit_with_overlap'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_with_overlap">&#182;</a>
    </div>
    <h3>Edit with overlap</h3>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Edit_1:'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_1:">&#182;</a>
    </div>
    <h4>Edit 1:</h4>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit1</span> <span class="o">=</span> <span class="s2">&quot;The cat sat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-Edit_2:'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Edit_2:">&#182;</a>
    </div>
    <h4>Edit 2:</h4>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="vg">$edit1</span> <span class="o">=</span>  <span class="s2">&quot;on the mat&quot;</span><span class="p">;</span></pre></div>
  </td>
</tr>
<tr id='section-17'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-17">&#182;</a>
    </div>
    <p>In this case, the same line has been changed in both edits and so they cannot be automatically merged. Differencing tools can be used to find out what exactly is different between the files and so the desired parts of each can be chosen.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-18'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-18">&#182;</a>
    </div>
    <p>Now that you have a basic understanding of what a VCS is and how they can help, let&rsquo;s look at setting one up and using it</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Installing_Subversion'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Installing_Subversion">&#182;</a>
    </div>
    <h2>Installing Subversion</h2>

<p>There are 2 big version control systems (VCS) in use today, Concurrent Versions System (CVS) and Subversion (SVN). We&rsquo;ll be using SVN because CVS seems to be going out of fashion.
SVN itself does not have a graphical user interface and so to make things more familiar, we&rsquo;ll be using a program called TortoiseSVN to interact with it.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-20'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-20">&#182;</a>
    </div>
    <p>If you have Apache 2.0 or greater installed then you can grab this release, <a href="http://subversion.tigris.org/files/documents/15/44049/Setup-Subversion-1.5.3.msi">here</a>
If you don&rsquo;t have Apache then you can get a standalone version from Slik SVN, <a href="http://www.sliksvn.com/pub/Slik-Subversion-1.5.4-win32.msi">here</a>. This is the version that we&rsquo;ll be using in this tutorial.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-21'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-21">&#182;</a>
    </div>
    <p>Also download TortoiseSVN from <a href="http://downloads.sourceforge.net/tortoisesvn/TortoiseSVN-1.5.5.14361-win32-svn-1.5.4.msi?download">here</a></p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-22'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-22">&#182;</a>
    </div>
    <p>Once your chosen version of SVN and TortoiseSVN have been downloaded, double click to start installing. Choose the typical install for both programs.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-23'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-23">&#182;</a>
    </div>
    <p>That&rsquo;s all there is to it! You now have a working VCS on your system and a great graphical interface to go with it. There is no program to start up to use SVN as TortoiseSVN integrates straight into the context (right-click) menu in windows explorer. Now let&rsquo;s get right into using it.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-Using_SVN'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-Using_SVN">&#182;</a>
    </div>
    <h2>Using SVN</h2>

<p>First of all we need to create a repository. This is where all of the saved project files and version information is kept. Create a new folder on your system and call it &lsquo;MyProject&rsquo;. Right click on this folder and click TortoiseSVN &ndash;> Create repository here.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-25'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-25">&#182;</a>
    </div>
    <p>Now we need to do what is called &ldquo;checking out&rdquo; the repository. This will create a working directory for us to add files and make changes. Think of this as downloding files from your FTP server in order to work on them locally.
Right click on your desktop and click TortoiseSVN &ndash;> Checkout repository. A dialog box will open asking for the location of your repository. Enter in the path to where you created this. You can also specify what you would like to call your checked out folder. Click OK when you&rsquo;re done. You should now see a newly created folder with a green tick on it. This green tick is a TortoiseSVN icon that means the contents of your folder have the latest versions from the repository.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-26'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-26">&#182;</a>
    </div>
    <p>You may be wondering why we have to create our repository in one place, and check it out in another. The repository is not meant to be edited manually. It contains a number of files and folders which SVN uses to keep track of the changes. You could store this repository anywhere (including on another computer) and check it out in the same way.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-27'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-27">&#182;</a>
    </div>
    <p>Now let&rsquo;s create a file. We&rsquo;ll deal with a very basic example to demonstrate the key actions so create a text file called numbers.txt in the checked out folder, and paste in the following text</p>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span></pre></div>
  </td>
</tr>
<tr id='section-28'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-28">&#182;</a>
    </div>
    <p>Now that we&rsquo;ve made some changes, we need to let SVN know about it. Right click in the folder and click on SVN Commit.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-29'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-29">&#182;</a>
    </div>
    <p>A dialog box will open asking you for a message to save along with the file. It is good practice to always comment on each commit you make. This will allow you to easily see what changes you&rsquo;ve made and is especially helpful when you have multiple people working from the same repository. Enter in a quick sentance about what the file is (TortoiseSVN will give you hints for filenames as you type), tick the check box next to the file and then click OK.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-30'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-30">&#182;</a>
    </div>
    <p>Your file has now been saved to the repository and a dialog box will open confirming this. Note that it says &ldquo;Completed at revision 1&rdquo;, each time you commit the revision number will update.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-31'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-31">&#182;</a>
    </div>
    <p>Now we&rsquo;re able to keep track of our own changes, but what if we want to bring someone else into the project?. Right click on the desktop and checkout the repository again giving it the name &lsquo;DifferentUser&rsquo;. Notice how the icon is not a green tick this time but a red exclamation mark. This means that our folder is not in sync with the repository as we have added a file from the first checkout. Go into this new folder, right click and click SVN Update.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-32'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-32">&#182;</a>
    </div>
    <p>You should now see the numbers.txt file in this folder. Let&rsquo;s make a change to this file. Open it up and replace the number 5 with the number 6. Let&rsquo;s also change the file in the first checkout we created, MyProject. Open the file and add the number 6 after the number 5 on a new line. We&rsquo;ve now created a situation where 2 users have made different changes to the same file at the same time. Commit the changes in MyProject and the folder icon should have a green tick. Now go into the second folder and try to commit. You will get a dialog box pop up informing you that there is a conflict.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-33'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-33">&#182;</a>
    </div>
    <p>We can now use TortoiseSVN to help us resolve this conflict. Right click in the folder and click TortoiseSVN &ndash;> Resolve conflicts. This brings up the TortoiseMerge window with which we can do this. The file on the left labelled &lsquo;Theirs&rsquo; is what is in the repository. This should contain the file that we committed from MyProject. The file on the right labelled &lsquo;Mine&rsquo; is what we&rsquo;re trying to commit. The area below labeled &lsquo;Merged&rsquo; is what will be committed once we&rsquo;ve made our changes. There are various options such as appending the files together, taking just one file or manually edit changes. We will manually edit the file in the &lsquo;Merged&rsquo; window and take this to be our new version.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-34'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-34">&#182;</a>
    </div>
    <p>In the &lsquo;Merged&rsquo; section, edit it so that it looks like the code below</p>
  </td>
  <td class=code>
    <div class='highlight'><pre><span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="mi">6</span></pre></div>
  </td>
</tr>
<tr id='section-35'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-35">&#182;</a>
    </div>
    <p>Now we can save our changes.
We have successfully resolved the conflict and both folders should have green ticks.</p>
  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>
<tr id='section-36'>
  <td class=docs>
    <div class="pilwrap">
      <a class="pilcrow" href="#section-36">&#182;</a>
    </div>
    <p>While this example was rather trivial, you should now have a grasp on what version control is and how you can use SVN to help manage your projects.</p>

  </td>
  <td class=code>
    <div class='highlight'><pre></pre></div>
  </td>
</tr>

</tbody>
</table>
    </div>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'oneofthesedaysblog'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    var disqus_identifier = '/subversion-for-code-management';
    var disqus_url = 'http://oneofthesedaysblog.com//subversion-for-code-management';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

            </section>
            <footer>
                <h5>The thoughts and ramblings of Sam Dalton - Auckland, New Zealand</h5>
                <ul>
                    <li><a href='http://github.com/samdalton' target="_blank">fork me</a></li>
                    <li><a href='http://twitter.com/spdalton' target="_blank">tweet me</a></li>
                    <li><a href='mailto:samdalton.co.nz' target="_blank">e-mail me</a></li>
                    <li><a href='http://last.fm/user/spdalton' target="_blank">let's rock</a></li>
                    <li><a href='http://feeds.feedburner.com/feedburner/ootdb' target="_blank">rss</a></li>
                </ul>
            </footer>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16582890-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
	</body>
</html>
